<div class="container-fluid">
<div class="card border-0">
  <h2><%= @idea.title %></h2>
  <p>Description: <%= @idea.description %></p>
  <small>
    <p>By: <%= @idea.user&.full_name || 'DELETED USER' %></p>
  </small>
  <div class= "mb-3 mt-2">
    <% if can?(:update, @idea) %>
      <%= link_to "Edit Idea", edit_idea_path(@idea) %> |
    <% end %>
      <% if can?(:destroy, @idea) %>
      <%= link_to "Delete Idea", idea_path(@idea), method: :delete, data: { confirm: 'Are you sure that you want to delete this idea?' } %>
    <% end %>
  </div>
</div>  
</div>

<section class="container-fluid">
<h4>Review</h4>

<%= form_with model: [@idea, @review], local: true do |f| %>
  <% if @review.errors.present? %>
    <p>
      <%= @review.errors.full_messages.join(', ') %>
    </p>
  <% end %>
  <div class="form-group">
    <%= f.label :body %>
    <%= f.text_area :body, cols: 50, rows: 5, class: "form-control" %>
  </div>
  <%= f.submit "Submit Review", :class => "btn btn-outline-primary mb-3" %>
<% end %>

<ul class="review-list">
    <% @reviews.each do |review| %>
      <li class="mb-2">
        <p class="card-text">
          <%= review.body %> <br>
          <small>
            Reviewed by <%= review.user&.full_name || 'DELETED' %> 
          </small>
          <% if can? :destroy, review %>
          â€¢
          <small>
            <%=
              link_to(
                "Delete Review",
                review_path(review),
                method: :delete,
                data: {
                  confirm: "Are you sure?"
                }
              )
            %>
          </small> 
          <% end %>   
        </p>
      </li>
    <% end %>
  </ul>
</section>