
<h1><%= @idea.title %></h1>
<p>Description: <%= @idea.description %></p>
<p>By: <%= @idea.user&.full_name || 'DELETED USER' %></p>

<% if can?(:update, @idea) %>
<%= link_to "Edit Idea", edit_idea_path(@idea) %> |
<% end %>
<% if can?(:destroy, @idea) %>
<%= link_to "Delete Idea", idea_path(@idea), method: :delete, data: { confirm: 'Are you sure that you want to delete this idea?' } %>
<% end %>

<%= form_with model: [@idea, @review], local: true do |f| %>
  <% if @review.errors.present? %>
    <p>
      <%= @review.errors.full_messages.join(', ') %>
    </p>
  <% end %>
  <div>
    <%= f.label :body %>
    <%= f.text_area :body %>
  </div>
  <%= f.submit %>
<% end %>

<h3>Reviews</h3>
<% @reviews.each do |review| %>
  <div>
    <p><%= review.body %></p>
    <p>Reviewed by: <%= review.user&.full_name || 'DELETED USER' %></p>
    <% if can?(:destroy, review) %>
    <%= link_to 'Delete Review', review_path(review), method: :delete, data: { confirm: 'Are you sure that you want to delete this review?' } %>
    <% end %>
  </div>
<% end %>